/*
http://treemenu.nornix.com/
Build date: 2007-07-27 16:01:39+00:00
*/
var Nornix={};Nornix.addEvent=function(_1,_2,fn,_4){};Nornix.removeEvent=function(_5,_6,fn,_8){};if(document.addEventListener){Nornix.addEvent=function(_9,_a,fn,_c){_9.addEventListener(_a,fn,_c);};Nornix.removeEvent=function(_d,_e,fn,_10){_d.removeEventListener(_e,fn,_10);};}else{if(document.attachEvent){Nornix.addEvent=function(obj,_12,fn){obj["e"+_12+fn]=fn;obj[_12+fn]=function(){var e=window.event;e.target=window.event.srcElement;obj["e"+_12+fn](e);};obj.attachEvent("on"+_12,obj[_12+fn]);};Nornix.removeEvent=function(obj,_16,fn){obj.detachEvent("on"+_16,obj[_16+fn]);obj[_16+fn]=null;obj["e"+_16+fn]=null;};}else{Nornix.addEvent=Function;Nornix.removeEvent=Function;}}Nornix.cancelEvent=function(e,c){e.returnValue=false;if(e.preventDefault){e.preventDefault();}if(c){e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation();}}};Nornix.delayedInit=function(id,_1b,_1c){var el;if(_1c===undefined){_1c=10;}var _1e=window.setInterval(function(){if(el=document.getElementById(id)){window.clearInterval(_1e);_1b(el);}},_1c);};Nornix.createCookie=function(_1f,_20,_21){var _22;if(_21){var _23=new Date();_23.setTime(_23.getTime()+(_21*24*60*60*1000));_22="; expires="+_23.toGMTString();}else{_22="";}document.cookie=_1f+"="+_20+_22+"; path=/";};Nornix.readCookie=function(_24){var _25=_24+"=";var ca=document.cookie.split(";"),i=0,c;while(c=ca[i++]){c=Nornix.trim(c);if(c.indexOf(_25)===0){return c.substring(_25.length,c.length);}}return "";};Nornix.eraseCookie=function(_29){createCookie(_29,"",-1);};Nornix.getTextContent=function(_2a){if(typeof _2a.textContent!="undefined"){return _2a.textContent;}else{return _2a.innerText;}};Nornix.trim=function(s){return s.replace(/^\s*|\s*$/g,"");};Nornix.swapClasses=function(el,_2d,_2e){if(!el){return;}if(el.className.length===0){el.className=_2e?_2e:"";return;}var arr=el.className.split(" "),i=0,t;while(t=arr[i++]){if(t===_2d){if(_2e){arr[i-1]=_2e;el.className=arr.join(" ");return;}else{delete arr[i-1];el.className=arr.join(" ");return;}}else{if(t===_2e){el.className=arr.join(" ");return;}}}if(_2e){arr[arr.length]=_2e;}el.className=arr.join(" ");};Nornix.addClass=function(el,_33){return Nornix.swapClasses(el,null,_33);};Nornix.removeClass=function(el,_35){return Nornix.swapClasses;}();Nornix.containsClass=function(el,s){if(!el||!el.className){return false;}var arr=el.className.split(" "),i=0,t;while(t=arr[i++]){if(t===s){return true;}}return false;};Nornix.isIe=document.all&&window.opera===undefined;Nornix.eqNodeName=function(el,_3c){if(el&&el.nodeName&&el.nodeName.toLowerCase()===_3c){return true;}return false;};Nornix.findChildOfType=function(_3d,_3e,_3f,_40){var e;if(!_40){var i=0;while(e=_3d.childNodes[i++]){if(Nornix.eqNodeName(e,_3e)){return _3f(e);}}}else{var i=_3d.childNodes.length-1;while(e=_3d.childNodes[i--]){if(Nornix.eqNodeName(e,_3e)){return _3f(e);}}}};Nornix.imagePreload=function(_43,_44){var i=0,img;if(!_44){_44="";}while(img=_43[i++]){(new Image()).src=_44+img;}};Nornix.live2copy=function(_47){var _48=[],i=0,el;while(el=_47[i++]){_48[_48.length]=el;}return _48;};Nornix.TreeMenu=function(_4b,_4c){var _4d=this;var _4e=_4b?_4b:"menu";var _4f="tree"+_4e;var _50=Nornix.readCookie(_4f);var _51=(_4c===false)?false:true;var _52=window.location+"#";_4d.openPattern=/(^| )open( |$)/;this.start=function(){Nornix.delayedInit(_4e,init);if(_4d.config.preloadImages&&!Nornix.readCookie("preImg")){Nornix.imagePreload(_4d.config.preloadImages,_4d.config.imagePath);Nornix.createCookie("preImg","x");}};function init(_53){if(!document.getElementById||!document.createElement){return;}_4d.menu=_53;_4d.menuElements=Nornix.live2copy(_4d.menu.getElementsByTagName("li"));if(_4d.config.openCloseAll){createOpenCloseAllIcons();}setClasses();ieFix();EventHandlers();}function EventHandlers(){init();function init(){if(_4d.config.menuLinkElement){Nornix.addEvent(document.getElementById(_4d.config.menuLinkElement),"click",menuJump);if(Nornix.isIe){Nornix.addEvent(document.getElementById(_4d.config.menuLinkElement),"focus",menuJumpIe);}}if(_51){removeWhitespace(_4d.menu);_51=false;}Nornix.addEvent(_4d.menu,"click",checkClickDynamic,true);Nornix.addEvent(_4d.menu,"keydown",checkKeyDynamic,true);Nornix.addEvent(window,"unload",save);}function menuJump(e){focusNode(_4d.menu);Nornix.cancelEvent(e);return false;}function menuJumpIe(e){if(e.altKey){focusNode(_4d.menu);}}function checkClickDynamic(e){var t=e.target;switch(t.className){case "closeTree":var i=0,_59=_4d.menuFolders;while(li=_59[i++]){makeClosed(li);}ieFix();return false;case "openTree":var i=0,_59=_4d.menuFolders;while(li=_59[i++]){makeOpen(li);}ieFix();return false;}var p=t.parentNode;if(Nornix.eqNodeName(t,"span")){toggle(p);return;}if(p&&isFolder(p)&&isHrefEmpty(t)){toggle(p);Nornix.cancelEvent(e);return false;}return true;}function checkKeyDynamic(e){t=e.target;if(Nornix.containsClass(t,"root")){return checkKey(e,t,0);}if(Nornix.containsClass(t,"closeTree")){return checkKey(e,t,3);}if(Nornix.containsClass(t,"openTree")){return checkKey(e,t,4);}var p=t.parentNode;if(Nornix.containsClass(p,"folder")){return checkKey(e,t,1);}if(Nornix.containsClass(p,"document")){return checkKey(e,t,2);}return true;}}function setClasses(){var _5d=[];var i,li,a,_61,chr;var _63=_4d.menuElements;var _64=document.createElement("span");var _65;_64.title=_4d.texts.openFolderTitle;var _66=0;if(_4d.config.dynamicClasses){var _67=window.location.href;Nornix.findChildOfType(_4d.menu,"a",function(a){Nornix.swapClasses(a,null,"root");if(a.href===_67){a.removeAttribute("href");setEmptyHrefAsCurrent(a);}});i=0;while(li=_63[i++]){a=li.firstChild;_61=isFolder(li);var _69;if(_61){_69="folder closed";_5d[_5d.length]=li;_65=_64.cloneNode(false);li.insertBefore(_65,a);chr=_50.charAt(_66++);if(chr&&chr==="-"){_69="folder open";li.firstChild.title=_4d.texts.closeFolderTitle;}}else{_69="document";}if(_51){Nornix.findChildOfType(li.parentNode,"li",function(_6a){if(li===_6a){_69+=" last";}},true);}else{if(li===li.parentNode.lastChild){_69+=" last";}}if(a.href==_67){a.removeAttribute("href");setEmptyHrefAsCurrent(a);if(_61){_69="folder open";li.firstChild.title=_4d.texts.closeFolderTitle;}var _6b=li.parentNode.parentNode;while(_6b&&_6b!=_4d.menu){makeOpen(_6b);_6b=_6b.parentNode.parentNode;}}li.className=_69;}}else{i=0;while(li=_63[i++]){a=li.firstChild;_61=isFolder(li);if(isHrefEmpty(a)){setEmptyHrefAsCurrent(a);}if(_61){_5d[_5d.length]=li;_65=_64.cloneNode(false);li.insertBefore(_65,a);chr=_50.charAt(_66++);if(chr&&chr==="-"){makeOpen(li);}}}i=0;while(a=_4d.menu.childNodes[i++]){if(Nornix.eqNodeName(a,"a")){setEmptyHrefAsCurrent(a);break;}}}_4d.menuFolders=_5d;}function setEmptyHrefAsCurrent(a){if(!a.href){a.href="javascript:;";Nornix.swapClasses(a,null,"current");if(_4d.config.markCurrentItem){a.insertBefore(document.createElement("span"),a.firstChild);}}}function checkKey(e,o,_6f){var _70,_71,_72,_73,_74,_75,_76;switch(_6f){case 0:_70=true;break;case 1:_71=true;_75=true;break;case 2:_72=true;_75=true;break;case 3:_73=true;_76=true;break;case 4:_74=true;_76=true;break;}var p=o.parentNode;var _78;var _79=e.keyCode!==null?e.keyCode:e.which;if(_71&&(_79==32||(_79==13&&isHrefEmpty(o)))){toggle(p);}else{if(_70&&(_79===40||((_79===39)&&!focusAnchor(o.nextSibling)))&&(_78=p.lastChild.firstChild)){focusNode(_78);}else{if(_75&&(_79===40)){if(_72||!isOpen(p)){if(_78=p.nextSibling){focusNode(_78);}else{if(_71&&(_78=o.nextSibling.firstChild)){toggle(p);focusNode(_78);}else{_78=p;while(_78&&_78!==_4d.menu){_78=_78.parentNode.parentNode;if(_78.nextSibling){focusNode(_78.nextSibling);break;}}}}}else{if(_78=p.nextSibling){focusNode(_78);}else{if(_78=o.nextSibling.firstChild){focusNode(_78);}}}}else{if(_75&&(_79===38)){if(_78=p.previousSibling){focusNode(_78);}else{if(_78=p.parentNode.parentNode){focusNode(_78);}}}else{if(_75&&(_79===39)){if(_72&&(_78=p.nextSibling)){focusNode(_78);}else{if(o.nextSibling&&(_78=o.nextSibling.firstChild)){if(isOpen(p)){focusNode(_78);}else{toggle(p);focusNode(_78);}}}}else{if(_75&&(_79===37)){if(_78=p.parentNode.parentNode){focusNode(_78);}if(_71&&isOpen(p)){toggle(p);}}else{if(_72&&(_79===32)){}else{if(_79===27&&_4d.config.contentElement){window.location.hash=_4d.config.contentElement;}else{if(_76&&(_79===37||_79===38)){focusAnchor(o.previousSibling);}else{if(_73&&(_79===39||_79===40)){focusAnchor(o.nextSibling);}else{if(_74&&(_79===39||_79===40)){focusNode(o.nextSibling.firstChild);}else{return true;}}}}}}}}}}}Nornix.cancelEvent(e);return false;}function save(){var s="",i=0,li;var _7d=_4d.menuFolders;while(li=_7d[i++]){if(isOpen(li)){s+="-";}else{s+="+";}}Nornix.createCookie(_4f,s);}function isHrefEmpty(_7e){if(_7e.href&&(_7e.href==_52||_7e.href==="javascript:;")){return true;}return !_7e.href;}function ieFix(){}if(Nornix.isIe){ieFix=function(){_4d.menu.style.position="absolute";_4d.menu.style.position="relative";try{window.event.srcElement.focus();}catch(err){}};}else{ieFix=function(){};}function removeWhitespace(n){var i=0,c;while(c=n.childNodes[i]){switch(c.nodeType){case 1:var j=0,c2;while(c2=c.childNodes[j]){switch(c2.nodeType){case 1:removeWhitespace(c2);break;case 3:if(!/\S/.test(c2.nodeValue)){c.removeChild(c2);continue;}break;case 8:c.removeChild(c2);continue;}j++;}break;case 3:if(!/\S/.test(c.nodeValue)){n.removeChild(c);continue;}break;case 8:n.removeChild(c);continue;}i++;}}function isFolder(li){if(_51){return Nornix.findChildOfType(li,"ul",function(x){return true;});}else{return li.childNodes.length>1;}}function toggle(_86){if(!isOpen(_86)){makeOpen(_86);}else{makeClosed(_86);}ieFix();}function makeOpen(li){Nornix.swapClasses(li,"closed","open");li.firstChild.title=_4d.texts.closeFolderTitle;}function makeClosed(li){Nornix.swapClasses(li,"open","closed");li.firstChild.title=_4d.texts.openFolderTitle;}function focusNode(_89){if(!_89||!_89.firstChild){return false;}var n=_89.firstChild;if(focusAnchor(n)){return true;}if(!n.nextSibling||_89===_4d.menu){return false;}n=n.nextSibling;return focusAnchor(n);}function focusAnchor(a){if(Nornix.eqNodeName(a,"a")){a.focus();return true;}return false;}function isOpen(li){return li.className.search(_4d.openPattern)!==-1;}function createOpenCloseAllIcons(){var _8d=document.createElement("a");_8d.href="javascript:;";var a=_8d.cloneNode(false);a.className="closeTree";a.title=_4d.texts.closeTreeTitle;_4d.menu.insertBefore(a,_4d.menu.firstChild.nextSibling);a=_8d.cloneNode(false);a.className="openTree";a.title=_4d.texts.openTreeTitle;_4d.menu.insertBefore(a,_4d.menu.firstChild.nextSibling.nextSibling);}};Nornix.TreeMenu.prototype.config={"dynamicClasses":true,"openCloseAll":true,"markCurrentItem":false,"contentElement":false,"menuLinkElement":false,"preloadImages":["home-icon.png","close-icon.png","open-icon.png","plus-node.png","minus-node.png","folder-closed-icon.png","doc-node-icon.png","folder-open-icon.png","treemenu-line.png","treemenu-current.png"],"imagePath":"/style/nornix-"};Nornix.TreeMenu.prototype.texts={"closeTreeTitle":"close all folders","openTreeTitle":"open all folders","closeFolderTitle":"close folder","openFolderTitle":"open folder"};

var treemenu = new Nornix.TreeMenu();
treemenu.start();
